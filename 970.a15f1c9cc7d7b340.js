"use strict";(self.webpackChunkchaskigo=self.webpackChunkchaskigo||[]).push([[970],{7970:(z,A,u)=>{u.r(A),u.d(A,{RegisterModule:()=>Y});var M=u(9808),f=(u(6533),u(270)),y=u(127),k=u(2676),d=u(5409),I=u(8667),e=u(5e3),S=u(4961),c=u(3075);function q(r,g){1&r&&(e.TgZ(0,"div",35),e._uU(1,"Por favor rellene este campo."),e.qZA())}function F(r,g){1&r&&(e.TgZ(0,"div",35),e._uU(1,"Por favor rellene este campo."),e.qZA())}function J(r,g){1&r&&(e.TgZ(0,"div",35),e._uU(1,"Por favor rellene este campo."),e.qZA())}function w(r,g){1&r&&(e.TgZ(0,"div",35),e._uU(1,"Por favor rellene este campo."),e.qZA())}function H(r,g){1&r&&(e.TgZ(0,"div",35),e._uU(1,"Por favor rellene este campo."),e.qZA())}let N=(()=>{class r{constructor(n){this.usersService=n,this.path=k.y$.url,this.user=new I.U}ngOnInit(){window.addEventListener("load",function(){var n=document.getElementsByClassName("needs-validation");Array.prototype.filter.call(n,function(i){i.addEventListener("submit",function(o){!1===i.checkValidity()&&(o.preventDefault(),o.stopPropagation()),i.classList.add("was-validated")},!1)})},!1)}capitalize(n){n.value=d.je.fnc(n.value)}validate(n){let t;"username"==$(n).attr("name")&&(t=/^[A-Za-z]{2,8}$/,n.value=n.value.toLowerCase(),this.usersService.getFilterData("username",n.value).subscribe(i=>{if(Object.keys(i).length>0)return $(n).parent().addClass("was-validated"),n.value="",void d.Hj.fnc("error","Username ya existe",null)})),"password"==$(n).attr("name")&&(t=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{4,}$/),t.test(n.value)||($(n).parent().addClass("was-validated"),n.value="")}onSubmit(n){n.invalid||(d.Hj.fnc("loading","Loading...",null),this.user.returnSecureToken=!0,this.usersService.registerAuth(this.user).subscribe(t=>{t.email==this.user.email&&this.usersService.sendEmailVerificationFnc({requestType:"VERIFY_EMAIL",idToken:t.idToken}).subscribe(o=>{this.user.displayName=`${this.user.first_name} ${this.user.last_name}`,this.user.method="direct",this.user.needConfirm=!1,this.user.username=this.user.username.toLowerCase();let a=new Date,v=a.getDate(),l=a.getMonth()+1,s=a.getFullYear();this.user.userCreated=`${v}-${l}-${s}`,this.usersService.registerDatabase(this.user).subscribe(h=>{d.Hj.fnc("success","Confirma tu cuenta en tu bandeja de entrada de correo (Revisar spam)","login")})})},t=>{(t.error.error.message="EMAIL_EXIST")?d.Hj.fnc("error","Ya existe un registro con este correo",null):d.Hj.fnc("error",t.error.error.message,null)}))}facebookRegister(){let n=this.usersService,t=this.user;y.Z.initializeApp({apiKey:"AIzaSyCHoFlA5FukTEOqVqO-x3gCHIuVuoB4fo8",authDomain:"chaskigo-d719c.firebaseapp.com",databaseURL:"https://chaskigo-d719c-default-rtdb.firebaseio.com",projectId:"chaskigo-d719c",storageBucket:"chaskigo-d719c.appspot.com",messagingSenderId:"300686559345",appId:"1:300686559345:web:2678fc449b7c8f068633d0",measurementId:"G-SP9NCPT3TK"});const o=new f._O,a=(0,f.v0)();a.languageCode="it",(0,f.rh)(a,o).then(function(l){!function v(l,s,h){if(l){var m=l.user;let p=new Date,_=p.getDate(),C=p.getMonth()+1,b=p.getFullYear();s.displayName=m.displayName,s.email=m.email,s.idToken=m.accessToken,s.method=l.providerId,s.needConfirm=!0,s.username=m.email.split("@")[0],s.picture=m.photoURL,s.userCreated=`${_}-${C}-${b}`,s.returnSecureToken=!0,h.getFilterData("email",s.email).subscribe(Z=>{Object.keys(Z).length>0?d.Hj.fnc("error","Ya te encuentras registrado con Facebook, inicia tu cuenta","login"):h.registerDatabase(s).subscribe(T=>{""!=T.name&&d.Hj.fnc("success","Por favor iniciar con tu cuenta de Facebook","login")})})}}(l,t,n)}).catch(function(l){d.Hj.fnc("error",l.message,"register")})}googleRegister(){let n=this.usersService,t=this.user;y.Z.initializeApp({apiKey:"AIzaSyCHoFlA5FukTEOqVqO-x3gCHIuVuoB4fo8",authDomain:"chaskigo-d719c.firebaseapp.com",databaseURL:"https://chaskigo-d719c-default-rtdb.firebaseio.com",projectId:"chaskigo-d719c",storageBucket:"chaskigo-d719c.appspot.com",messagingSenderId:"300686559345",appId:"1:300686559345:web:2678fc449b7c8f068633d0",measurementId:"G-SP9NCPT3TK"});const o=new f.hJ,a=(0,f.v0)();a.languageCode="it",(0,f.rh)(a,o).then(function(l){!function v(l,s,h){if(l){var m=l.user;let p=new Date,_=p.getDate(),C=p.getMonth()+1,b=p.getFullYear();s.displayName=m.displayName,s.email=m.email,s.idToken=m.accessToken,s.method=l.providerId,s.needConfirm=!0,s.username=m.email.split("@")[0],s.picture=m.photoURL,s.userCreated=`${_}-${C}-${b}`,s.returnSecureToken=!0,h.getFilterData("email",s.email).subscribe(Z=>{Object.keys(Z).length>0?d.Hj.fnc("error","Ya te encuentras registrado con Google, inicia tu cuenta","login"):h.registerDatabase(s).subscribe(T=>{""!=T.name&&d.Hj.fnc("success","Por favor iniciar con tu cuenta de Google","login")})})}}(l,t,n)}).catch(function(l){d.Hj.fnc("error",l.message,"register")})}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(S.f))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-register"]],decls:64,vars:11,consts:[[1,"ps-breadcrumb"],[1,"container"],[1,"breadcrumb"],["href","/"],[1,"ps-my-account"],["novalidate","",1,"ps-form--account","ps-tab-root","needs-validation",3,"ngSubmit"],["f","ngForm"],[1,"ps-tabs"],["id","register",1,"ps-tab","active"],[1,"ps-form__content"],["width","75","alt","logo-chaskigo",1,"mx-auto","d-block","img-fluid",3,"src"],[1,"text-center"],[1,"form-group"],["type","text","placeholder","Nombres","name","first_name","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["first_name",""],[1,"valid-feedback"],["class","invalid-feedback",4,"ngIf"],["type","text","placeholder","Apellido","name","last_name","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["last_name",""],["type","email","placeholder","Email address","name","email","email","","required","",1,"form-control",3,"ngModel","ngModelChange","change"],["email",""],["type","text","placeholder","Username","name","username","required","","minlength","2","maxlength","8","pattern","[A-Za-z]{2,8}","data-toggle","tooltip","title","Enter your username with at least 2 characters, maximum 8 characters without using numbers",1,"form-control",3,"ngModel","ngModelChange","change"],["username",""],["type","password","placeholder","Password","name","password","required","","minlength","4","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{4,}","data-toggle","tooltip","title","Su password debe contener al menos 4 caracteres e incluir caracteres especiales, letras mayusculas, minusculas y n\xfameros",1,"form-control",3,"ngModel","ngModelChange","change"],["password",""],[1,"form-group","submtit"],[1,"ps-btn","ps-btn--fullwidth"],[1,"link"],["href","login"],[1,"ps-form__footer"],[1,"ps-list--social"],[1,"facebook",2,"cursor","pointer",3,"click"],[1,"fab","fa-facebook-f"],[1,"google",2,"cursor","pointer",3,"click"],[1,"fab","fa-google"],[1,"invalid-feedback"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li")(4,"a",3),e._uU(5,"Inicio"),e.qZA()(),e.TgZ(6,"li"),e._uU(7,"Registrarte"),e.qZA()()()(),e.TgZ(8,"div",4)(9,"div",1)(10,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(i);const a=e.MAs(11);return t.onSubmit(a)}),e.TgZ(12,"div",7)(13,"div",8)(14,"div",9),e._UZ(15,"img",10),e.TgZ(16,"h3",11),e._uU(17,"Registra tu Cuenta en Chaskigo"),e.qZA(),e.TgZ(18,"div",12)(19,"input",13,14),e.NdJ("ngModelChange",function(a){return t.user.first_name=a})("change",function(){e.CHM(i);const a=e.MAs(20);return t.capitalize(a)}),e.qZA(),e.TgZ(21,"div",15),e._uU(22,"V\xe1lido."),e.qZA(),e.YNc(23,q,2,0,"div",16),e.qZA(),e.TgZ(24,"div",12)(25,"input",17,18),e.NdJ("ngModelChange",function(a){return t.user.last_name=a})("change",function(){e.CHM(i);const a=e.MAs(26);return t.capitalize(a)}),e.qZA(),e.TgZ(27,"div",15),e._uU(28,"V\xe1lido."),e.qZA(),e.YNc(29,F,2,0,"div",16),e.qZA(),e.TgZ(30,"div",12)(31,"input",19,20),e.NdJ("ngModelChange",function(a){return t.user.email=a})("change",function(){e.CHM(i);const a=e.MAs(32);return t.validate(a)}),e.qZA(),e.TgZ(33,"div",15),e._uU(34,"V\xe1lido."),e.qZA(),e.YNc(35,J,2,0,"div",16),e.qZA(),e.TgZ(36,"div",12)(37,"input",21,22),e.NdJ("ngModelChange",function(a){return t.user.username=a})("change",function(){e.CHM(i);const a=e.MAs(38);return t.validate(a)}),e.qZA(),e.TgZ(39,"div",15),e._uU(40,"V\xe1lido."),e.qZA(),e.YNc(41,w,2,0,"div",16),e.qZA(),e.TgZ(42,"div",12)(43,"input",23,24),e.NdJ("ngModelChange",function(a){return t.user.password=a})("change",function(){e.CHM(i);const a=e.MAs(44);return t.validate(a)}),e.qZA(),e.TgZ(45,"div",15),e._uU(46,"V\xe1lido."),e.qZA(),e.YNc(47,H,2,0,"div",16),e.qZA(),e.TgZ(48,"div",25)(49,"button",26),e._uU(50,"Registarse"),e.qZA()(),e.TgZ(51,"div",27)(52,"a",28),e._uU(53,"Ya tengo una cuenta?"),e.qZA()()(),e.TgZ(54,"div",29)(55,"p"),e._uU(56,"Connect with:"),e.qZA(),e.TgZ(57,"ul",30)(58,"li")(59,"a",31),e.NdJ("click",function(){return t.facebookRegister()}),e._UZ(60,"i",32),e.qZA()(),e.TgZ(61,"li")(62,"a",33),e.NdJ("click",function(){return t.googleRegister()}),e._UZ(63,"i",34),e.qZA()()()()()()()()()}if(2&n){const i=e.MAs(11);e.xp6(15),e.MGl("src","",t.path,"img/template/favicon.png",e.LSH),e.xp6(4),e.Q6J("ngModel",t.user.first_name),e.xp6(4),e.Q6J("ngIf",i.submitted&&i.controls.first_name.errors),e.xp6(2),e.Q6J("ngModel",t.user.last_name),e.xp6(4),e.Q6J("ngIf",i.submitted&&i.controls.last_name.errors),e.xp6(2),e.Q6J("ngModel",t.user.email),e.xp6(4),e.Q6J("ngIf",i.submitted&&i.controls.email.errors),e.xp6(2),e.Q6J("ngModel",t.user.username),e.xp6(4),e.Q6J("ngIf",i.submitted&&i.controls.username.errors),e.xp6(2),e.Q6J("ngModel",t.user.password),e.xp6(4),e.Q6J("ngIf",i.submitted&&i.controls.password.errors)}},directives:[c._Y,c.JL,c.F,c.Fj,c.Q7,c.JJ,c.On,M.O5,c.on,c.wO,c.nD,c.c5],styles:[""]}),r})();var R=u(9780);const j=[{path:"",component:N}];let D=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[R.Bz.forChild(j)],R.Bz]}),r})();var E=u(5503);let Y=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[M.ez,D,c.u5,E.D]]}),r})()}}]);